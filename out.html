<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Name Capture</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            padding: 50px;
        }
        h1 {
            color: #333;
        }
        p {
            font-size: 18px;
        }
        #blocked-message {
            display: none;
            color: red;
            font-size: 24px;
        }
        #info-message {
            background-color: rgba(0, 0, 0, 0.5);
            color: #fff;
            padding: 20px;
            border-radius: 10px;
            font-size: 18px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Device Information Capture</h1>
    
    <div id="info-message">
        This application is under <strong>Nonyane Investment Tree</strong> protection. Users' details will be stored to our server for protection purposes.
    </div>

    <p>We are capturing your device's information.</p>

    <div id="blocked-message">You have been blocked from accessing this site.</div>

    <script>
        // List of blocked user-agents (devices/browsers to block)
        const blockedUserAgents = [
            "BlockedDeviceName1", // Add a known device name to block
            "BlockedDeviceName2", // Add another device to block
            "Mozilla/5.0 (Windows NT 10.0; Win64; x64)" // Example user-agent to block
        ];

        // Function to capture the device name (user-agent string)
        function getDeviceName() {
            return navigator.userAgent;  // User Agent string captures device info
        }

        // Function to get the user's IP address using an external service (if needed)
        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error('Error getting IP address:', error);
                return 'IP not found';
            }
        }

        // Function to check if the device is blocked
        function isBlockedDevice(deviceName) {
            return blockedUserAgents.some(blockedUserAgent => deviceName.includes(blockedUserAgent));
        }

        // Function to send data to Telegram (with device name and address)
        async function sendToTelegram(message) {
            const botToken = 'YOUR_BOT_TOKEN';  // Replace with your bot's token
            const chatID = 'YOUR_CHAT_ID';      // Replace with your chat ID or user ID

            const apiURL = `https://api.telegram.org/bot${botToken}/sendMessage`;
            const text = encodeURIComponent(message);

            // Construct the full URL
            const url = `${apiURL}?chat_id=${chatID}&text=${text}`;

            // Send the request
            const response = await fetch(url);
            const data = await response.json();

            // Optional: Log the response from Telegram API
            console.log(data);
        }

        // Capture the device name and address and block the user if necessary
        window.onload = async () => {
            const deviceName = getDeviceName();
            const userIP = await getUserIP();  // Capture the user's IP address
            
            // If the device is blocked, show a block message and prevent further interaction
            if (isBlockedDevice(deviceName)) {
                document.getElementById('blocked-message').style.display = 'block';
                return; // Stop further execution of the script
            }

            // Send device information and user IP to Telegram if the device is not blocked
            const message = `New device has accessed the site:\nDevice Name: ${deviceName}\nUser IP: ${userIP}`;
            sendToTelegram(message);
        };
    </script>
</body>
</html>
